var a=document.getElementById("audio");var vPrev=document.getElementById("video-prev");var vNext=document.getElementById("video-next");var vidWrap=document.getElementById("video-preloader");var vLeft=document.getElementById("video1");var vRight=document.getElementById("video2");var canvas=document.getElementById("c");var lightsCanvas=document.getElementById("l");var context=canvas.getContext("2d");var back=document.createElement("canvas");var backcontext=back.getContext("2d",{willReadFrequently:true});var transCanvas=document.getElementById("cX");var cXcontext=transCanvas.getContext("2d");var active=0;var songBPM;var moveTimeout;var duration;var xPos=0;var mDur;var bpm;var hasZoomed=false;var cw,ch,cx,scale,active;var loaderImage=document.getElementById("preload-image");var audioContextExists=false;function fitCanvas(){cw=window.innerWidth;ch=window.innerHeight;if(cw>=ch){canvas.width=cw*.8;canvas.height=ch*.8;vidWrap.width=cw*.8;vidWrap.height=ch*.8;scale=vidWrap.height*.8}else{canvas.width=cw*.8;canvas.height=cw*.8;vidWrap.width=cw*.8;vidWrap.height=cw*.8;scale=vidWrap.width*.8}}function cloneLights(lightsCanvas){var newCanvas=document.getElementById("l-rev");var context=newCanvas.getContext("2d");newCanvas.width=lightsCanvas.width;newCanvas.height=lightsCanvas.height;context.drawImage(lightsCanvas,0,0);return newCanvas}window.addEventListener("resize",()=>{fitCanvas()});fitCanvas();window.addEventListener("load",event=>{zoomImage()});let start=Date.now();function bumpImage(){loaderImage.classList.add("shake-effect");hasZoomed=true}function zoomImage(){loaderImage.classList.add("zoom-effect")}const content={songs:[{video:"videos/Video1-compressed.mp4",blendMode:"screen",filter:"blur(15px) drop-shadow(0 0 30px rgba(51,180,172,1)",audio:"audio/01.mp3",baseColor:"rgb(255, 200, 220)",opacity:"1",title:"Opening",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ornare libero vel erat facilisis facilisis. Aenean tempus augue ante, sit amet lacinia felis semper quis.",maxOffset:70,bpm:91},{video:"videos/Video2-compressed.mp4",blendMode:"screen",filter:"blur(15px) drop-shadow(0 0 30px #e47e30) hue-rotate(210deg)",baseColor:"rgb(255, 200, 220)",opacity:"1",audio:"audio/02.mp3",title:"Dreams",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ornare libero vel erat facilisis facilisis. Aenean tempus augue ante, sit amet lacinia felis semper quis.",maxOffset:70,bpm:130},{video:"videos/Video3-compressed.mp4",blendMode:"screen",filter:"blur(15px) drop-shadow(0 0 30px #33B4AC) hue-rotate(45deg)",baseColor:"rgb(255, 200, 220)",opacity:"1",audio:"audio/03.mp3",title:"Home",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ornare libero vel erat facilisis facilisis. Aenean tempus augue ante, sit amet lacinia felis semper quis.",maxOffset:70,bpm:84},{video:"videos/Video4-compressed.mp4",blendMode:"hard-light",filter:"blur(15px) drop-shadow(0 0 30px rgba(51,180,172,1)",baseColor:"rgb(255, 200, 220)",opacity:"1",audio:"audio/04.mp3",title:"Rest Rework",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ornare libero vel erat facilisis facilisis. Aenean tempus augue ante, sit amet lacinia felis semper quis.",maxOffset:700,bpm:139},{video:"videos/Video7-compressed.mp4",blendMode:"screen",filter:"blur(15px) drop-shadow(0 0 30px #A7FFFA) hue-rotate(45deg)",baseColor:"rgb(255, 200, 220)",opacity:"1",audio:"audio/05.mp3",title:"Gentle Night",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ornare libero vel erat facilisis facilisis. Aenean tempus augue ante, sit amet lacinia felis semper quis.",maxOffset:70,bpm:120},{video:"videos/Video5-compressed.mp4",blendMode:"screen",filter:"blur(15px) drop-shadow(0 0 30px #A7FFFA) hue-rotate(45deg)",baseColor:"rgb(255, 200, 220)",opacity:"1",audio:"audio/06.mp3",title:"Lost in Time",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ornare libero vel erat facilisis facilisis. Aenean tempus augue ante, sit amet lacinia felis semper quis.",maxOffset:70,bpm:90},{video:"videos/Video6-compressed.mp4",blendMode:"normal",filter:"blur(15px) drop-shadow(0 0 30px rgba(51,180,172,1)",baseColor:"rgb(255, 200, 220)",opacity:".5",audio:"audio/07.mp3",title:"Rest",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ornare libero vel erat facilisis facilisis. Aenean tempus augue ante, sit amet lacinia felis semper quis.",maxOffset:70,bpm:69}]};vLeft.addEventListener("play",()=>{if(cw>=ch){scale=canvas.height}else{scale=canvas.width}clearTimeout(moveTimeout);if(audioContextExists){}else{var audioContext=new AudioContext;var audioSrc=audioContext.createMediaElementSource(a);audioContextExists=true;analyser=audioContext.createAnalyser();audioSrc.connect(analyser);analyser.connect(audioContext.destination);analyser.fftSize=32;audioContext.resume()}playMusic();var au=document.getElementById("audio");au.onloadedmetadata=function(){duration=au.duration;bpm=content.songs[active].bpm;mDur=duration/60*bpm*2;var n=0;bumpVideo(vLeft,vRight,n)}},false);vLeft.addEventListener("pause",()=>{pauseMusic()},false);function playMusic(){a.volume=1;a.load();a.play()}function pauseMusic(){a.pause();a.load()}function bumpVideo(vLeft,vRight,n){n++;var freq=1e3*60/bpm/2;const bufferLength=analyser.frequencyBinCount;const freqArray=new Uint8Array(bufferLength);analyser.getByteFrequencyData(freqArray);const waveArray=new Float32Array(bufferLength);analyser.getFloatTimeDomainData(waveArray);var maximum;maximum=content.songs[active].maxOffset;redrawClone();function convertRange(value,r1,r2){return(value-r1[0])*(r2[1]-r2[0])/(r1[1]-r1[0])+r2[0]}var offset=convertRange(waveArray[0],[0,1],[0,maximum]);vLeft.style.left=offset+"px";vRight.style.left=-offset+"px";moveTimeout=requestAnimationFrame(function(){bumpVideo(vLeft,vRight,n)})}function redrawClone(){cloneLights(lightsCanvas);requestAnimationFrame(function(){redrawClone()})}function drawVideo(v,c,bc,cx,start){fitCanvas();scale=canvas.height;back.width=canvas.width;back.height=canvas.height;if(v.paused||v.ended)return false;var bumper;if(cw>=ch){bumper=(canvas.width-canvas.height)/2}else{bumper=(canvas.height-canvas.width)/2}bc.drawImage(v,0,0,scale,scale);var idata=bc.getImageData(0,0,scale,scale);var data=idata.data;var glitchData=idata.data;for(var i=0;i<glitchData.length;i+=4){}idata.data=data;c.putImageData(idata,bumper,0);cx.putImageData(idata,bumper,0);requestAnimationFrame(function(){drawVideo(v,c,bc,cx,start)})}function openText(){var x=document.getElementById("text-modal");x.style.opacity="1";x.style.pointerEvents="all";typewriter.start()}function closeText(){var x=document.getElementById("text-modal");x.style.opacity="0";x.style.pointerEvents="none";typewriter.pause()}function toggleMenu(){var x=document.getElementById("ui");x.classList.toggle("active");var y=document.getElementById("menu-toggle-blur");y.classList.add("clicked")}function reset(){pauseMusic();clearTimeout(moveTimeout);var reset=document.getElementById("reset");reset.classList.remove("active");var x=document.getElementById("l");x.classList.remove("active");var y=document.getElementById("l-rev");y.classList.remove("active");vLeft.pause();vRight.pause();loaderImage.style.opacity="1"}function playTrack(songId){active=songId;context.clearRect(0,0,canvas.width,canvas.height);loaderImage.style.opacity="0";vidWrap.style.opacity="1";vLeft.src=content.songs[songId].video;vRight.src=content.songs[songId].video;a.src=content.songs[songId].audio;vLeft.play();vRight.play();var x=document.getElementById("l");x.classList.add("active");x.style.mixBlendMode=content.songs[songId].blendMode;x.style.filter=content.songs[songId].filter;x.style.opacity=content.songs[songId].opacity;var y=document.getElementById("l-rev");y.classList.add("active");y.style.mixBlendMode=content.songs[songId].blendMode;y.style.filter=content.songs[songId].filter;y.style.opacity=content.songs[songId].opacity;y.style.opacity=content.songs[songId].opacity;var reset=document.getElementById("reset");reset.classList.add("active");var y=document.getElementById("song-blur");y.classList.add("clicked")}var animatedText=document.getElementById("animated-text");var typewriter=new Typewriter(animatedText,{loop:false,delay:50});typewriter.pauseFor(1e3).typeString("Looking back to a familiar moment in the past, the view widens as we grow ever more distant. New topologies become visible.").pauseFor(1e3).pasteString("<br>").typeString("Sometimes this shape gifts deeper understanding. But sometimes we see something that was never real.").pauseFor(1e3).pasteString("<br>").typeString("There is nothing solid in sand.").pauseFor(1e3).pasteString("<br>").typeString("Archiving is a way to remember that shelters our memories from this distorting flow of time.").pauseFor(1e3).pasteString("<br>").typeString("Often disguising the subjective as objective, archives can still offer a way to make sense of the past.").pauseFor(1e3).pasteString("<br>").typeString("Archives do this by being a container for what we place inside. They trace an outline around the fragments within, giving them form.").pauseFor(1e3).pasteString("<br>").typeString("This is how the archive becomes a stable location. A firm foundation - from which we can take flight.").pauseFor(1e3).pasteString("<br>").typeString("Because archiving is time travel.").pauseFor(1e3).pasteString("<br>").typeString("By holding our memories in time, the archive becomes a place we can return to - even though there's no way back.").pauseFor(1e3).pasteString("<br>").typeString("As the past prints the future into the present, this portal also goes forward.").pauseFor(1e3).pasteString("<br>").typeString("This archive is an object through which a message can be sent.").pauseFor(1e3).pasteString("<br>").typeString("Within a future, and in all the din, one more beacon.").pauseFor(1e3).pasteString("<br>").typeString("He was here, and I loved him.").pauseFor(1e3).pasteString("<br>").typeString("-").pauseFor(1e3).pasteString("<br>").typeString("transmitter@archive-emotion.xyz");var DEBUG=false;var CURVE_POINTS=5;var CURVE_POINT_X_JITTER=1.5;var CURVE_POINT_Y_JITTER=3.5;var CURVE_POINT_MAX_FLOAT_X_DIST=270;var CURVE_POINT_MAX_FLOAT_Y_DIST=80;var CURVE_POINT_MIN_FLOAT_DIST=15;var CURVE_POINT_MAX_FLOAT_TIME=9e3;var CURVE_POINT_MIN_FLOAT_TIME=3e3;var BRUSH_COUNT=50;var BRUSH_WIDTH=100;var BRUSH_HEIGHT=500;var BRUSH_MIN_SCALE_Y=.02;var BRUSH_MAX_SCALE_Y_VARIANCE=.5;var BRUSH_MAX_ALPHA_VARIANCE=.7;var BRUSH_MAX_ANIM_TIME=7e3;var BRUSH_MIN_ANIM_TIME=1500;var BRUSH_MAX_Z_ANIM_TIME=8e4;var BRUSH_MIN_Z_ANIM_TIME=58e3;var BRUSH_ALPHA_DROPOFF=.07;var MOUSE_X_OFFSET=50;var MOUSE_Y_OFFSET=25;var mouseXPercentage=.5;var mouseYPercentage=.5;function deCasteljau(p0x,p0y,cp0x,cp0y,cp1x,cp1y,p1x,p1y,t){var Ax=p0x+t*(cp0x-p0x),Ay=p0y+t*(cp0y-p0y),Bx=cp0x+t*(cp1x-cp0x),By=cp0y+t*(cp1y-cp0y),Cx=cp1x+t*(p1x-cp1x),Cy=cp1y+t*(p1y-cp1y);var Dx=Ax+t*(Bx-Ax),Dy=Ay+t*(By-Ay),Ex=Bx+t*(Cx-Bx),Ey=By+t*(Cy-By);var Px=Dx+t*(Ex-Dx),Py=Dy+t*(Ey-Dy);return{x:Px,y:Py}}var Curve=function(vpX,vpY,vpZ,epX,epY,epZ,brushCount,maxBrushAlpha,fill){this.vanishingPoint={x:vpX,y:vpY,z:vpZ};this.endPoint={x:epX,y:epY,z:epZ};this.brushCount=brushCount||BRUSH_COUNT;this.maxBrushAlpha=maxBrushAlpha||1;this.points=[new CurvePoint(this.vanishingPoint.x,this.vanishingPoint.y,this.vanishingPoint.z,0)];for(var i=0;i<CURVE_POINTS-1;i++){var mod=(i+1)/CURVE_POINTS;mod*=mod;var xJitter=Math.random()*CURVE_POINT_X_JITTER-CURVE_POINT_X_JITTER/2;var x=this.vanishingPoint.x+mod*(this.endPoint.x-this.vanishingPoint.x);x+=xJitter*(x-this.points[i].x);var yJitter=(1.2-mod)*(Math.random()*CURVE_POINT_Y_JITTER-CURVE_POINT_Y_JITTER/2);var y=this.vanishingPoint.y+mod*(this.endPoint.y-this.vanishingPoint.y);y+=yJitter*(y-this.points[i].y);var z=mod*(this.endPoint.z-this.vanishingPoint.z)+this.vanishingPoint.z;this.points.push(new CurvePoint(x,y,z,(Math.random()*.33+.33)*(x-this.points[i].x)))}this.points.push(new CurvePoint(this.endPoint.x,this.endPoint.y,this.endPoint.z,0));this.brushes=[];for(var i=0;i<this.brushCount;i++){var noScale=Math.random()<.01;this.brushes.push(new Brush(this,i/this.brushCount*(this.endPoint.z-this.vanishingPoint.z)+this.vanishingPoint.z,noScale?"rgb(255, 200, 220)":fill||null,noScale))}};Curve.prototype={drawDebug:function(ctx){ctx.lineWidth=2;ctx.setLineDash([2,2]);ctx.strokeStyle="#f99";for(var i=1,len=this.points.length;i<len;i++){ctx.beginPath();var cps=this.points[i].getCps();ctx.moveTo(cps[0].x,cps[0].y);ctx.lineTo(cps[1].x,cps[1].y);ctx.stroke()}var bezierPoints=[];for(var i=0,len=this.points.length;i<len;i++){var cps=this.points[i].getCps();if(i!==0){bezierPoints.push(cps[0])}bezierPoints.push(this.points[i]);if(i!==len-1){bezierPoints.push(cps[1])}}ctx.beginPath();ctx.setLineDash([]);ctx.strokeStyle="#c00";ctx.moveTo(bezierPoints[0].x,bezierPoints[0].y);for(var i=1,len=bezierPoints.length;i<len;i+=3){ctx.bezierCurveTo(bezierPoints[i].x,bezierPoints[i].y,bezierPoints[i+1].x,bezierPoints[i+1].y,bezierPoints[i+2].x,bezierPoints[i+2].y)}ctx.stroke()},draw:function(ctx){for(var i=0,len=this.brushes.length;i<len;i++){this.brushes[i].draw(ctx)}},getPointAtZ:function(p){if(p<=this.points[0].z){return this.points[0]}else if(p>=this.points[this.points.length-1].z){return this.points[this.points.length-1]}else{var i=0;for(var len=this.points.length;i<len;i++){if(p<=this.points[i].z){break}}var lastPoint=this.points[i-1];var lastPointCps=lastPoint.getCps();var nextPoint=this.points[i];var nextPointCps=nextPoint.getCps();var t=(p-lastPoint.z)/(nextPoint.z-lastPoint.z);return deCasteljau(lastPoint.x,lastPoint.y,lastPointCps[1].x,lastPointCps[1].y,nextPointCps[0].x,nextPointCps[0].y,nextPoint.x,nextPoint.y,t)}},update:function(){for(var i=0,len=this.points.length;i<len;i++){this.points[i].updatePosition()}for(var i=0,len=this.brushes.length;i<len;i++){this.brushes[i].updatePosition()}},setMaxBrushAlpha:function(alpha){this.maxBrushAlpha=alpha}};var CurvePoint=function(x,y,z,cpLength){this.x=x;this.y=y;this.z=z;this.cpLength=cpLength;this.cpYOffset=Math.random()*cpLength-cpLength;this.xAnimTime=Math.random()*(CURVE_POINT_MAX_FLOAT_TIME-CURVE_POINT_MIN_FLOAT_TIME)+CURVE_POINT_MIN_FLOAT_TIME;this.xVariance=Math.max(Math.random()*this.z*CURVE_POINT_MAX_FLOAT_X_DIST,CURVE_POINT_MIN_FLOAT_DIST);this.xMin=this.x-this.xVariance/2;this.xAnimOffset=Math.random()*Math.PI;this.yAnimTime=Math.random()*(CURVE_POINT_MAX_FLOAT_TIME-CURVE_POINT_MIN_FLOAT_TIME)+CURVE_POINT_MIN_FLOAT_TIME;this.yVariance=Math.max(Math.random()*this.z*CURVE_POINT_MAX_FLOAT_Y_DIST,CURVE_POINT_MIN_FLOAT_DIST);this.yMin=this.y-this.yVariance/2;this.yAnimOffset=Math.random()*Math.PI};CurvePoint.prototype={getCps:function(){return[{x:this.x-this.cpLength,y:this.y-this.cpYOffset},{x:this.x+this.cpLength,y:this.y+this.cpYOffset}]},updatePosition:function(){if(!this.startTime)this.startTime=(new Date).getTime();var now=(new Date).getTime();var deltaTime=now-this.startTime;this.x=this.xMin+(Math.sin(deltaTime/this.xAnimTime*Math.PI+this.xAnimOffset)*.5+.5)*this.xVariance;this.x+=this.z*(1-mouseXPercentage*2)*MOUSE_X_OFFSET;this.y=this.yMin+(Math.sin(deltaTime/this.yAnimTime*Math.PI+this.yAnimOffset)*.5+.5)*this.yVariance;this.y+=this.z*(1-mouseYPercentage*2)*MOUSE_Y_OFFSET}};var Brush=function(curve,z,color,noScale){this.curve=curve;this.z=z;this.alpha=z*Math.random()*.55+.15;this.scaleYMod=(1-BRUSH_MIN_SCALE_Y)*Math.random();this.scaleXMod=.5*Math.random()*(2-this.scaleYMod*2);this.noScale=!!noScale;this.color1=color||"rgb(50, 170, 82)";this.alphaAnimTime=Math.random()*(BRUSH_MAX_ANIM_TIME-BRUSH_MIN_ANIM_TIME)+BRUSH_MIN_ANIM_TIME;this.alphaVariance=Math.max(Math.random()*BRUSH_MAX_ALPHA_VARIANCE,this.alpha);this.alphaMin=Math.max(this.alpha-this.alphaVariance/2,0);this.alphaAnimOffset=Math.random()*Math.PI;this.scaleYAnimTime=Math.random()*(BRUSH_MAX_ANIM_TIME-BRUSH_MIN_ANIM_TIME)+BRUSH_MIN_ANIM_TIME;this.scaleYVariance=Math.random()*BRUSH_MAX_SCALE_Y_VARIANCE;this.scaleYMin=this.scaleY-this.scaleYVariance/2;this.scaleYAnimOffset=Math.random()*Math.PI;this.zAnimOffset=this.curve.vanishingPoint.z-(z-this.curve.vanishingPoint.z);this.zAnimTime=Math.random()*(BRUSH_MAX_Z_ANIM_TIME-BRUSH_MIN_Z_ANIM_TIME)+BRUSH_MIN_Z_ANIM_TIME;if(this.noScale){this.alphaMin=0;this.alphaVariance=1}};Brush.prototype={draw:function(ctx){if(this.z<this.curve.vanishingPoint.z||this.z>this.curve.endPoint.z)return false;var point=this.curve.getPointAtZ(this.z);var alpha=(.5+.5*Math.min(this.z,1))*this.alpha*this.curve.maxBrushAlpha;if(this.z-this.curve.vanishingPoint.z<BRUSH_ALPHA_DROPOFF){alpha*=(this.z-this.curve.vanishingPoint.z)/BRUSH_ALPHA_DROPOFF}else if(this.curve.endPoint.z-this.z<BRUSH_ALPHA_DROPOFF){alpha*=(this.curve.endPoint.z-this.z)/BRUSH_ALPHA_DROPOFF}if(!this.noScale){var scaleY=this.z*this.scaleYMod+BRUSH_MIN_SCALE_Y;var scaleX=this.z*this.scaleXMod+.5}else{var scaleY=this.scaleYMod+BRUSH_MIN_SCALE_Y;var scaleX=this.scaleXMod+.5}ctx.fillStyle=this.color1;ctx.globalAlpha=alpha;ctx.beginPath();ctx.moveTo(point.x,point.y-scaleY*BRUSH_HEIGHT);ctx.quadraticCurveTo(point.x+scaleX*BRUSH_WIDTH/2,point.y-scaleY*BRUSH_HEIGHT,point.x+scaleX*BRUSH_WIDTH/2,point.y);ctx.quadraticCurveTo(point.x+scaleX*BRUSH_WIDTH/2,point.y+scaleY*BRUSH_WIDTH,point.x,point.y+scaleX*BRUSH_WIDTH/2);ctx.quadraticCurveTo(point.x-scaleX*BRUSH_WIDTH/2,point.y+scaleY*BRUSH_WIDTH,point.x-scaleX*BRUSH_WIDTH/2,point.y);ctx.quadraticCurveTo(point.x-scaleX*BRUSH_WIDTH/2,point.y-scaleY*BRUSH_HEIGHT,point.x,point.y-scaleY*BRUSH_HEIGHT);ctx.fill()},updatePosition:function(){if(!this.startTime)this.startTime=(new Date).getTime()-2e4;var now=(new Date).getTime();var deltaTime=now-this.startTime;this.alpha=Math.min(this.alphaMin+(Math.sin(deltaTime/this.alphaAnimTime*Math.PI+this.alphaAnimOffset)*.5+.5)*this.alphaVariance,1);this.scaleY=this.scaleYMin+(Math.sin(deltaTime/this.scaleYAnimTime*Math.PI+this.scaleYAnimOffset)*.5+.5)*this.scaleYVariance;this.z=(deltaTime/this.zAnimTime+this.zAnimOffset)*this.curve.endPoint.z;if(this.z>this.curve.vanishingPoint.z)this.z*=this.z;if(this.z>this.curve.endPoint.z){this.z=this.z-this.curve.endPoint.z+this.curve.vanishingPoint.z;this.startTime=now}}};var NorthernLights=function(parentElement,width,height,curves){this.parentElement=parentElement;this.width=width||window.innerWidth;this.height=height||window.innerHeight;this.canvas=lightsCanvas;this.canvas.width=this.width/2;this.canvas.height=this.height;this.ctx=this.canvas.getContext("2d",{willReadFrequently:true});this.ctx.globalCompositeOperation="color-dodge";this.curves=curves||[new Curve(this.width*.1,this.height*.9,this.width*.9,this.height*.4)];if(DEBUG){this.fpsDisplay=document.createElement("span");this.fpsDisplay.style.position="fixed";this.fpsDisplay.style.top="0";this.fpsDisplay.style.left="0";this.fpsDisplay.style.background="#333";this.fpsDisplay.style.color="#0f0";document.body.appendChild(this.fpsDisplay)}this.start();this.parentElement.appendChild(this.canvas)};NorthernLights.prototype={start:function(){this.running=true;var _this=this;var lastTime=(new Date).getTime();(function anim(){_this.ctx.clearRect(0,0,_this.width,_this.height);for(var i=0,len=_this.curves.length;i<len;i++){_this.curves[i].update();_this.curves[i].draw(_this.ctx);if(DEBUG){_this.ctx.globalCompositeOperation="source-over";_this.ctx.globalAlpha=1;_this.curves[i].drawDebug(_this.ctx);_this.ctx.globalCompositeOperation="color-dodge";var now=(new Date).getTime();_this.fpsDisplay.innerText=Math.round(1e3/(now-lastTime));lastTime=now}}if(_this.running)requestAnimationFrame(anim)})()},pause:function(){this.running=false},getCanvas:function(){return this.canvas},getCurves:function(){return this.curves}};var gradCanvas=document.createElement("canvas");var gradCtx=gradCanvas.getContext("2d");var grad=gradCtx.createLinearGradient(window.innerWidth*.5,window.innerHeight,window.innerWidth*.35,0);grad.addColorStop(.4,"rgb(50, 130, 80)");grad.addColorStop(.6,"rgba(100, 100, 120, .5)");var grad2=gradCtx.createLinearGradient(window.innerWidth*.5,window.innerHeight*.5,window.innerWidth*.3,0);grad2.addColorStop(.35,"rgb(50, 130, 140)");grad2.addColorStop(.7,"rgba(50, 70, 100,.7)");var curves=[new Curve(window.innerWidth*.17,window.innerHeight*.94,.01,window.innerWidth*.8,window.innerHeight*.8,.8,BRUSH_COUNT*.3,.4,"rgb(60, 150, 120)"),new Curve(window.innerWidth*.1,window.innerHeight*.9,.05,window.innerWidth*.8,window.innerHeight*.4,1,null,.8,grad),new Curve(window.innerWidth*.25,window.innerHeight*.65,.33,window.innerWidth*.55,0,1.1,BRUSH_COUNT*.6,1,grad2)];var nl1=new NorthernLights(document.body,null,null,curves);document.body.addEventListener("mousemove",function(e){mouseXPercentage=e.clientX/window.innerWidth;mouseYPercentage=e.clientY/window.innerHeight});
